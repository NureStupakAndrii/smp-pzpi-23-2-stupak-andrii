  1 Харківський національний університет радіоелектроніки
  2 Факультет комп’ютерних наук
  3 Катедра програмної інженерії
  4
  5
  6 ЗВІТ
  7 з лабораторної роботи №2
  8 з дисципліни «Скриптові мови програмування»
  9 на тему: «ПРИНЦИПИ РОБОТИ PHP. ОСНОВНІ СИНТАКСИЧНІ КОНСТРУКЦІЇ. ДАНІ, ЇХ ТИПИ ТА РОБОТА З НИМИ»
 10
 11
 12 Виконав
 13 ст. гр. ПЗПІ-23-2
 14 Ступак Андрій
 15
 16 Перевірив
 17 ст. викладач катедри ПІ
 18 Сокорчук Ігор Петрович
 19
 20
 21 Харків 2025
 22
 23
 24 1 ІСТОРІЯ ЗМІН
 25
 26 №   Дата            Версія звіту    Опис змін та виправлень
 27 1   03.06.2025      0.1             Створено звіт
 28
 29
 30 2 ЗАВДАННЯ
 31
 32 Створити консольний застосунок «Продовольчий магазин "Весна"». Реалізувати функціональність головного меню: потрібно реалізувати цикл для введення та обробки команд користувача. Реалізувати функціональність вибору товарів: користувач повинен мати можливість вибирати товари для покупки, додавати та видаляти товари з кошика. Реалізувати підсумковий рахунок: програма повинна вивести інформацію про товари в кошику та підсумкову суму. Реалізувати налаштування профілю: користувач має ввести своє ім’я та вік, які мають пройти валідацію.
 33
 34
 35 3 ОПИС ВИКОНАНОЇ РОБОТИ
 36
 37 Застосунок поділений на окремі функціональні модулі: showMenu, showList, showBasket, showTotal, setProfile та showProfile. Для підрахунку довжини рядків створено функцію getMaxLength. У функцію, як параметр передається масив з елементами, у якому необхідно знайти довжину найбільшої назви продукту і повернути її користувачеві. Довжина, кількість видимих символів, отримується через конструкцію з регулярним виразом, яка шукає будь-який один символ у кодуванні Unicode. Код функції:
 38   3 function getMaxLength($array) {
 39   4     $maxLength = 0;
 40   5     foreach ($array as $item) {
 41   6         $name = $item[0];
 42   7         $length = preg_match_all('/./u', $name, $matches);
 43   8         if ($length > $maxLength) {
 44   9             $maxLength = $length;
 45  10         }
 46  11     }
 47  12     return $maxLength;
 48  13 }
 49 Список продуктів у магазині зберігається в асоціативному масиві, у якому кожний елемент представляє окремий товар, де кожному ключу відповідає масив з двох елементів: назви продукту та його ціни. Код масиву:
 50  30     $products = [
 51  31         '1' => ['Молоко пастеризоване', 12],
 52  32         '2' => ['Хліб білий', 9],
 53  33         '3' => ['Сир білий', 21],
 54  34         '4' => ['Сметана 20%', 25],
 55  35         '5' => ['Вода газована', 18],
 56  36         '6' => ['Кофе', 21],
 57  37         '7' => ['Рожевий торт', 35],
 58  38         '8' => ['Коренья на блюді', 12],
 59  39         '9' => ['Диня', 20],
 60  40     ];
 61 Блок, у якому реалізовано основний цикл взаємодії з користувачем виконується до тих пір, поки користувач не вибере команду виходу з програми. Спочатку викликається функція showMenu, яка виводить головне меню з варіантами дії і  надає користувачу право обрати. Якщо користувач вводить цифру 1, то викликається функція showList і виводить список товарів у магазині, серед яких користувач може обирати і додавати їх до кошику. Якщо користувач вводить цифру 2, то викликається функція showTotal і користувач бачить вміст свого кошику разом з інформацією про кількість, ціну однієї одиниці продукту, вартість окремого продукту та вартість усього кошика. Якщо кошик порожній, то користувач бачить відповідне повідомлення. Ввівши цифру 3, користувач баче власний профіль завядки функції showProfile, якщо він ще не встановив ім'я та вік, він може це зробити, але якщо вік вже встановлено, то користувач має можливість змінити ці дані, ввіши цифру 1. Встановлення та зміна інформації у профілі виконується за допомогою функції setProfile. Щоб вийти з застосунку необхідно ввести цифру 0, після чого робота програми завершиться. Код блоку:
 62 190 while (!$exit) {
 63 191     showMenu();
 64 192     $choice = trim(fgets($handle));
 65 193
 66 194     switch ($choice) {
 67 195         case "1":
 68 196             showList($basket);
 69 197             break;
 70 198         case "2":
 71 199             showTotal($basket);
 72 200             break;
 73 201         case "3":
 74 202             showProfile($name, $age);
 75 203             break;
 76 204         case "0":
 77 205             $exit = true;
 78 206             break;
 79 207         default:
 80 208             echo "ПОМИЛКА! Введіть правильну команду\n";
 81 209         }
 82 210 }
 83 Повний код програми наведено у додатку Б.
 84
 85
 86 4 ВИСНОВКИ
 87
 88 У результаті виконання лабораторної роботи було створено консольний застосунок, який реалізує «Продовольчий магазин "Весна"». Застосунок надає простий інтерфейс для перегляду, додавання та видалення продуктів. Програма читає введення користувача зі стандартного вводу та перевіряє введену інформацію.
 89
 90
 91 ДОДАТОК А
 92 Відеозапис
 93
 94 Відеозапис презентації результатів лабораторної роботи: https://www.youtube.com/watch?v=A6NGfBlONsA
 95
 96 Хронологічний опис відеозапису:
 97 00:00 - Вступ
 98 Представлення студента та завдання
 99
100 00:20 - Структура програми
101 Структура програми та основні функції
102
103 00:54 - Вивід меню та списку продуктів
104 Функції що відповідают за меню та список продуктів
105
106 04:22 - Вивід меню кошику
107 Функції виводу кошику
108
109 05:33 - Профіль користувача
110 Функції для встановлення та відображення профілю
111
112 07:18 - Демонстрація роботи програми
113 Демонстрація роботи програми, основні дії
114
115
116 ДОДАТОК Б
117 Програмний код:
118   1 #!/usr/bin/env php
119   2 <?php
120   3 function getMaxLength($array) {
121   4     $maxLength = 0;
122   5     foreach ($array as $item) {
123   6         $name = $item[0];
124   7         $length = preg_match_all('/./u', $name, $matches);
125   8         if ($length > $maxLength) {
126   9             $maxLength = $length;
127  10         }
128  11     }
129  12     return $maxLength;
130  13 }
131  14
132  15 function showMenu() {
133  16     echo "################################\n";
134  17     echo "# ПРОДОВОЛЬЧИЙ МАГАЗИН \"ВЕСНА\" #\n";
135  18     echo "################################\n";
136  19     echo "1 Вибрати товари\n";
137  20     echo "2 Отримати підсумковий рахунок\n";
138  21     echo "3 Налаштувати свій профіль\n";
139  22     echo "0 Вийти з програми\n";
140  23     echo "Введіть команду: ";
141  24 }
142  25
143  26 function showList(&$basket){
144  27     $handle = fopen("php://stdin", "r");
145  28     $exitList = false;
146  29
147  30     $products = [
148  31         '1' => ['Молоко пастеризоване', 12],
149  32         '2' => ['Хліб білий', 9],
150  33         '3' => ['Сир білий', 21],
151  34         '4' => ['Сметана 20%', 25],
152  35         '5' => ['Вода газована', 18],
153  36         '6' => ['Кофе', 21],
154  37         '7' => ['Рожевий торт', 35],
155  38         '8' => ['Коренья на блюді', 12],
156  39         '9' => ['Диня', 20],
157  40     ];
158  41
159  42     while (!$exitList) {
160  43         $maxLength = getMaxLength($products);
161  44
162  45         echo "№  НАЗВА" . str_repeat(' ', $maxLength - 3) . "ЦІНА\n";
163  46         foreach ($products as $key => [$name, $price]) {
164  47             $nameLength = preg_match_all('/./u', $name, $matches);
165  48             $paddedName = $name . str_repeat(' ', $maxLength - $nameLength);
166  49             printf("%-2d %s  %-3d\n", $key, $paddedName, $price);
167  50         }
168  51
169  52         echo "---------------------------\n";
170  53         echo "0  Повернутися\n";
171  54         echo "Виберіть товар: ";
172  55
173  56         $item = trim(fgets($handle));
174  57
175  58         if ($item == "0") {
176  59             $exitList = true;
177  60         } elseif (isset($products[$item])) {
178  61             [$name, $price] = $products[$item];
179  62             echo "Вибрано: $name\n";
180  63             echo "Введіть кількість, штук: ";
181  64             $count = (int)trim(fgets($handle));
182  65
183  66             if ($count > 0 && $count < 100) {
184  67                 $basket[] = [$name, $count, $price];
185  68
186  69             } elseif ($count === 0) {
187  70                 $found = false;
188  71                 foreach ($basket as $key => [$fname]) {
189  72                     if ($fname === $name) {
190  73                         unset($basket[$key]);
191  74                         $found = true;
192  75                         echo "$name видалено з кошика.\n";
193  76                     }
194  77                 }
195  78
196  79                 if (!$found) {
197  80                     echo "ПОМИЛКА! ТОВАРУ НЕМАЄ У ВАШОМУ КОШИКУ\n";
198  81                 }
199  82             }
200  83
201  84             showBasket($basket);
202  85             fgets($handle);
203  86         } else {
204  87             echo "ПОМИЛКА! Невірний номер товару\n";
205  88         }
206  89     }
207  90 }
208  91
209  92 function showBasket($basket) {
210  93     $maxLength = getMaxLength($basket);
211  94
212  95     echo "НАЗВА" . str_repeat(' ', $maxLength - 3) . "КІЛЬКІСТЬ\n";
213  96     foreach ($basket as $key => [$name, $count]) {
214  97         $nameLength = preg_match_all('/./u', $name, $matches);
215  98         $paddedName = $name . str_repeat(' ', $maxLength - $nameLength);
216  99         printf("%s  %-2d\n", $paddedName, $count);
217 100     }
218 101 }
219 102
220 103 function showTotal($basket) {
221 104     $maxLength = getMaxLength($basket);
222 105     $handle = fopen("php://stdin", "r");
223 106     $sum = 0;
224 107
225 108     if ($maxLength === 0) {
226 109         echo "КОШИК ПОРОЖНІЙ\n";
227 110         fgets($handle);
228 111     }
229 112     else
230 113     {
231 114         echo "№  НАЗВА" . str_repeat(' ', $maxLength - 3) . "ЦІНА  КІЛЬКІСТЬ  ВАРТІСТЬ\n";
232 115         foreach ($basket as $key => [$name, $count, $price]) {
233 116             $sum += $price * $count;
234 117             $nameLength = preg_match_all('/./u', $name, $matches);
235 118             $paddedName = $name . str_repeat(' ', $maxLength - $nameLength);
236 119             printf("%-2d %s  %-5d %-10d %-8d\n", $key, $paddedName, $price, $count, $price * $count);
237 120         }
238 121         echo "РАЗОМ ДО СПЛАТИ: " . $sum;
239 122
240 123         fgets($handle);
241 124     }
242 125 }
243 126
244 127 function setProfile(&$name, &$age) {
245 128     $handle = fopen("php://stdin","r");
246 129
247 130     do {
248 131         echo "Ваше ім'я: ";
249 132         $newName = trim(fgets($handle));
250 133         $hasLetter = preg_match('/\p{L}/u', $newName);
251 134
252 135         if (!$hasLetter) {
253 136             echo "ПОМИЛКА! Імʼя користувача не може бути порожнім і повинно містити хоча б одну літеру.\n";
254 137         }
255 138     } while (!$hasLetter);
256 139
257 140     do {
258 141         echo "Ваш вік: ";
259 142         $newAge = (int)trim(fgets($handle));
260 143         if ($newAge < 7 || $newAge > 150) {
261 144             echo "ПОМИЛКА! Користувач не може бути молодшим 7-ми або старшим 150-ти років.\n";
262 145         }
263 146     } while ($newAge < 7 || $newAge > 150);
264 147
265 148     $name = $newName;
266 149     $age = $newAge;
267 150 }
268 151
269 152 function showProfile(&$name, &$age) {
270 153     $handle = fopen("php://stdin", "r");
271 154
272 155     if ($name === "" || $age === 0) {
273 156         setProfile($name, $age);
274 157     }
275 158     else {
276 159         echo "\nПРОФІЛЬ\n";
277 160         echo "Ваше ім'я: " . $name . "\n";
278 161         echo "Ваш вік: " . $age . "\n";
279 162
280 163         $exitProfile = false;
281 164
282 165         while (!$exitProfile) {
283 166             echo "1 Змінити дані\n";
284 167             echo "0 Повернутися\n";
285 168             echo "Введіть команду: ";
286 169
287 170             $choice = trim(fgets($handle));
288 171             switch($choice) {
289 172                 case "1":
290 173                     setProfile($name, $age);
291 174                     break;
292 175                 case "0":
293 176                     $exitProfile = true;
294 177                     break;
295 178                 default:
296 179                     echo "ПОМИЛКА! Введіть правильну команду\n";
297 180             }
298 181         }
299 182     }
300 183 }
301 184
302 185 $exit = false;
303 186 $basket = [];
304 187 $name = ""; $age = 0;
305 188 $handle = fopen("php://stdin", "r");
306 189
307 190 while (!$exit) {
308 191     showMenu();
309 192     $choice = trim(fgets($handle));
310 193
311 194     switch ($choice) {
312 195         case "1":
313 196             showList($basket);
314 197             break;
315 198         case "2":
316 199             showTotal($basket);
317 200             break;
318 201         case "3":
319 202             showProfile($name, $age);
320 203             break;
321 204         case "0":
322 205             $exit = true;
323 206             break;
324 207         default:
325 208             echo "ПОМИЛКА! Введіть правильну команду\n";
326 209         }
327 210 }
328 211 ?>
